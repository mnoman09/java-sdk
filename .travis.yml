language: java
dist: trusty
jdk:
  - openjdk8
  - oraclejdk8
  - oraclejdk9
install: true
script:
    - "./gradlew clean"
    - "./gradlew exhaustiveTest"
    - "if [[ -n $TRAVIS_TAG ]]; then
          ./gradlew ship;
      else
          ./gradlew build;
      fi"
cache:
  gradle: true
  directories:
  - "$HOME/.gradle/caches"
  - "$HOME/.gradle/wrapper"
branches:
  only:
  - master
  - /^\d+\.\d+\.\d+(-SNAPSHOT|-alpha|-beta)?\d*$/ # trigger builds on tags which are semantically versioned to ship the SDK.
after_success:
  - ./gradlew coveralls uploadArchives --console plain
  - ./push-javadoc-to-gh-pages.sh
env:
    global:
    - secure: AscVURpguRPEklN23Y3XQ4mN6KqwW36DJsBMtVB9mxrKxcFlQu9kxNTO0OLoIBzuoKRVnQwxFWIxq0unSeQwRjfgpxS8mfe6UUutF8Zksj3YhAyNwlIG1DP38MDH5iX0NFEjARCfZgBqR0Uq6cS9i+vZLaTvITyQTkOEbrmvX1wn6xfk6F+h+k6k7mDsDwDx6DLluhGGVrJtnKJSd7WWOJfSQk7Qu6zyNs8mvkhueA2HxqB2gIjZwRZFSAsKOL4ZmkgWj46DsK6lkbwArCYwBN59d24A8ZE/OUq9ZkjU/NcWHqmDA93i/wXIBoaTXCMhZG+eJiswcTFSsWhbLVNxzllelr2UgdIzvQ10+L+iCCQoX0x+BHPybfdSRxDxETjd0bv8vh7CE9vNc1ZMT1gh3gLyjjBS1PGw8VmEvjlqV2tPzGZTdO/xD+3ENQBETfAJ8Vum43lNoyoqS9Svpe53coXUSh5J6I9ufnh477UHYB+tJ40hrklLV3puVvWHv/WdqHBfxpBj8ucom/OI9IpqxoNn5OadiqvueBVijE+UiOzv1nvR1j46H2Eqbe8RXnCeCdsX+UqpcnCTiXVYtNxvBCjD57B+cW6IHJf69JnY9i8lEc0RdZI8Fv7KuAN8yPfiZrKFrnO5x1NeYXa2z3g0wi2CWIbIJlf+cMcVprrpsFg=
